{% extends "admin/base_site.html" %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
    <div style="background: #2c2c2c; border: 2px solid #4a9eff; border-radius: 8px; padding: 20px; margin-bottom: 30px;">
        <h1 style="margin: 0; color: #fff; display: flex; align-items: center; gap: 10px;">
            üìã Console Template Library
        </h1>
        <p style="margin: 10px 0 0 0; color: #aaa; font-size: 16px;">
            Importing to: <strong style="color: #fff;">{{ current_project.name }}</strong>
        </p>
    </div>

    {% for project, templates in templates_by_project.items %}
    <div style="margin-bottom: 40px; background: #1e1e1e; border: 1px solid #444; border-radius: 8px; padding: 20px;">
        <h2 style="color: #4a9eff; margin: 0 0 20px 0; font-size: 24px;">
            {{ project.name }}
            {% if project.id == current_project.id %}
            <span style="color: #4caf50; font-size: 14px; font-weight: normal;">(Current Project)</span>
            {% endif %}
        </h2>
        
        {% for template in templates %}
        <div style="background: #2a2a2a; border: 1px solid #555; border-radius: 6px; padding: 20px; margin-bottom: 15px;">
            <h3 style="color: #fff; margin: 0 0 15px 0; font-size: 20px;">{{ template.name }}</h3>
            
            <div style="display: flex; gap: 20px; margin-bottom: 15px; color: #ccc;">
                <span>üì• {{ template.inputs_count }} Inputs</span>
                <span>üì§ {{ template.aux_count }} Aux Outputs</span>
                <span>‚¨õ {{ template.matrix_count }} Matrix Outputs</span>
            </div>
            
            {% if project.id == current_project.id %}
                <div style="background: #3a3a3a; border: 1px solid #666; border-radius: 4px; padding: 12px; color: #aaa; font-style: italic;">
                    ‚ÑπÔ∏è This template is already in your current project
                </div>
            {% else %}
                <form method="post" style="margin: 0;">
                    {% csrf_token %}
                    <input type="hidden" name="template_id" value="{{ template.id }}">
                    <button type="submit" style="background: #4a9eff; color: white; border: none; padding: 12px 24px; border-radius: 4px; font-size: 16px; font-weight: 500; cursor: pointer; width: 100%;">
                        Import to {{ current_project.name }}
                    </button>
                </form>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endfor %}

    <div style="margin-top: 30px;">
        <a href="{% url 'admin:planner_console_changelist' %}" style="background: #555; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block;">
            ‚Üê Back to Consoles
        </a>
    </div>
</div>
{% endblock %}